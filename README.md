[![Tests](https://github.com/dmondo/MarkovAPI/workflows/Tests/badge.svg)](https://github.com/dmondo/MarkovAPI/actions?workflow=Tests)

# MarkovAPI

MarkovAPI is a lightweight, RESTful API. You can submit a POST request to the ```/chains``` route with an array of text data you would like modelled, the order of the model to generate, and the number of Markov chains to return. MarkovAPI will then create an n-grams model from the processed text, build the requisite number of Markov chains from this n-grams model, and surface the resulting sentences.

## Tech Stack

This project operates within a service oriented architecture: a RESTful Flask/Python3 API handles all modeling logic and surfaces Markov chains, and a MERN (MongoDB, ExpressJS, ReactJS, NodeJS) stack client consumes the API in order to display and persist generated tweets for the user. The companion client repo can be found [here](https://github.com/dmondo/MarkovBot).

## The Nitty Gritty

MarkovAPI is written in Python3 (targeting Python3.7 and Python3.8) and uses the Flask micro-framework to build its API. Poetry takes care of package management, and Nox handles all sessions for testing, linting, documentation, and static type analysis.

The test suite uses pytest. Linting is provided by flake8 and follows the (unforgiving) Black style guide. Docstrings follow Google conventions, which allows us to run a Nox session to lint docstrings as well as the code itself. Type annotations and MyPy provide type safety. Sphinx handles documentation, which can be generated by a Nox session (see both the noxfile and the docs directory for more information).

## Build Process

Install Poetry for Python if you haven't already. See the [docs](https://python-poetry.org/docs/) for instructions.
  -=
Use Poetry to install the project dependencies:
<pre><code>> poetry install </code></pre>

At any time, you can either run nox from the noxfile via
<pre><code>> nox </code></pre>

or choose a particular nox session to run. For example to run the linter:
<pre><code>> nox -rs lint </code></pre>

to run a static type analysis:
<pre><code>> nox -rs mypy </code></pre>

to run the test suite:
<pre><code>> nox -rs tests </code></pre>

For a full list of nox session commands, see the ```noxfile.py``` in the project's root directory.

Finally and most importantly, don't forget to actually stand up the Flask server. If you're developing locally, you can simply run the following from the command line:
<pre><code>> env FLASK_APP=src/markov_api/app.py flask run  </code></pre>

Your API is now available (by default, on port 5000 locally), and if at any point you get lost in the repo, see the documentation, generated via the nox ```docs``` session, under ```docs/_build/index.html```!
